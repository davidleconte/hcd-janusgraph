# ==============================================================================
# HCD + JanusGraph Banking Compliance System - Environment Configuration
# ==============================================================================
#
# SECURITY NOTICE:
# - Never commit .env file to version control
# - Use strong passwords (min 12 characters, mixed case, numbers, symbols)
# - Rotate credentials regularly (every 90 days recommended)
# - Use different credentials for each environment (dev/staging/prod)
# - Store production credentials in secure vault (e.g., HashiCorp Vault, AWS Secrets Manager)
#
# ==============================================================================

# ------------------------------------------------------------------------------
# JanusGraph Configuration
# ------------------------------------------------------------------------------
JANUSGRAPH_HOST=localhost
JANUSGRAPH_PORT=18182

# Authentication (REQUIRED - DO NOT USE THESE PLACEHOLDERS IN PRODUCTION)
# Generate secure passwords with: openssl rand -base64 32
# Or use: python -c "import secrets; print(secrets.token_urlsafe(32))"
JANUSGRAPH_USERNAME=admin
JANUSGRAPH_PASSWORD=YOUR_SECURE_PASSWORD_HERE_MINIMUM_12_CHARACTERS

# SSL/TLS Configuration (ENABLED BY DEFAULT)
JANUSGRAPH_USE_SSL=true
JANUSGRAPH_VERIFY_CERTS=true
JANUSGRAPH_CA_CERTS=./config/certs/ca/ca-cert.pem
JANUSGRAPH_KEYSTORE_PASSWORD=CHANGE_ME_KEYSTORE_MIN_16_CHARS
JANUSGRAPH_TRUSTSTORE_PASSWORD=CHANGE_ME_TRUSTSTORE_MIN_16_CHARS

# ------------------------------------------------------------------------------
# OpenSearch Configuration
# ------------------------------------------------------------------------------
OPENSEARCH_HOST=localhost
OPENSEARCH_PORT=9200

# Authentication (REQUIRED - DO NOT USE THESE PLACEHOLDERS IN PRODUCTION)
# Generate secure passwords with: openssl rand -base64 32
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=YOUR_SECURE_PASSWORD_HERE_MINIMUM_12_CHARACTERS

# CRITICAL: Initial admin password for OpenSearch (REQUIRED - NO DEFAULT ALLOWED)
# This MUST be set explicitly in .env file before deployment
# The docker-compose file will fail if this is not set
# Generate with: openssl rand -base64 32
OPENSEARCH_INITIAL_ADMIN_PASSWORD=YOUR_SECURE_PASSWORD_HERE_MINIMUM_12_CHARACTERS

# SSL/TLS Configuration (ENABLED BY DEFAULT)
OPENSEARCH_USE_SSL=true
OPENSEARCH_VERIFY_CERTS=true
OPENSEARCH_CA_CERTS=./config/certs/ca/ca-cert.pem

# ------------------------------------------------------------------------------
# HCD (Cassandra) Configuration
# ------------------------------------------------------------------------------
HCD_HOST=localhost
HCD_PORT=19042
# Generate secure passwords with: openssl rand -base64 32
HCD_USERNAME=cassandra
HCD_PASSWORD=YOUR_SECURE_PASSWORD_HERE_MINIMUM_12_CHARACTERS

# SSL/TLS Configuration (ENABLED BY DEFAULT)
HCD_KEYSTORE_PASSWORD=CHANGE_ME_KEYSTORE_MIN_16_CHARS
HCD_TRUSTSTORE_PASSWORD=CHANGE_ME_TRUSTSTORE_MIN_16_CHARS
HCD_CLIENT_ENCRYPTION_ENABLED=true
HCD_INTERNODE_ENCRYPTION=all

# ------------------------------------------------------------------------------
# Security Settings
# ------------------------------------------------------------------------------

# Logging
LOG_LEVEL=INFO
LOG_SANITIZATION=true
LOG_REDACT_IP=false

# Input Validation
MAX_QUERY_LENGTH=10000
MAX_BATCH_SIZE=10000
MAX_STRING_LENGTH=1000

# Rate Limiting
MAX_REQUESTS_PER_MINUTE=1000
MAX_CONNECTIONS_PER_CLIENT=10

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------

# Environment
ENVIRONMENT=development  # development, staging, production
DEBUG=false

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# AlertManager Configuration
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD_MIN_16_CHARS
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Grafana Configuration
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_ADMIN_MIN_16_CHARS

# -----------------------------------------------------------------------------
# Development Settings (Remove in Production)
# -----------------------------------------------------------------------------

# Allow insecure connections (DEVELOPMENT ONLY)
# ALLOW_INSECURE_CONNECTIONS=true

# Disable certificate verification (DEVELOPMENT ONLY)
# DISABLE_CERT_VERIFICATION=true

# -----------------------------------------------------------------------------
# Podman Isolation (REQUIRED)
# -----------------------------------------------------------------------------
# These settings ensure proper isolation between projects on shared Podman machines
# Reference: PODMAN_ARCHITECTURE.md

# Project name for container/network/volume prefixing (REQUIRED)
# All containers will be named: {COMPOSE_PROJECT_NAME}_{service}_{instance}
COMPOSE_PROJECT_NAME=janusgraph-demo

# Podman machine connection name
PODMAN_CONNECTION=podman-wxd

# Platform for image builds (arm64 for Apple Silicon, amd64 for Intel)
PODMAN_PLATFORM=linux/arm64

# -----------------------------------------------------------------------------
# Production Checklist
# -----------------------------------------------------------------------------
# Before deploying to production, ensure:
# [ ] All passwords changed from defaults (especially OPENSEARCH_INITIAL_ADMIN_PASSWORD)
# [ ] OPENSEARCH_INITIAL_ADMIN_PASSWORD explicitly set (no default fallback)
# [ ] SSL/TLS enabled for all services
# [ ] Certificate verification enabled
# [ ] Log sanitization enabled
# [ ] Debug mode disabled
# [ ] Strong passwords (min 16 chars)
# [ ] Credentials rotated regularly
# [ ] .env file not in version control
# [ ] Environment-specific .env files used
# [ ] Monitoring and alerting configured
# [ ] Startup validation passes (run: python src/python/utils/startup_validation.py)
# -----------------------------------------------------------------------------
