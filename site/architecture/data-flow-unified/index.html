
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Enterprise graph database platform for banking compliance and fraud detection" name="description"/>
<meta content="David Leconte, IBM Worldwide | Tiger-Team" name="author"/>
<link href="https://davidleconte.github.io/hcd-janusgraph/architecture/data-flow-unified/" rel="canonical"/>
<link href="../overview/" rel="prev"/>
<link href="../streaming-architecture/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Data Flow - HCD JanusGraph Banking Platform</title>
<link href="../../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#unified-data-flow-documentation">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="HCD JanusGraph Banking Platform" class="md-header__button md-logo" data-md-component="logo" href="../.." title="HCD JanusGraph Banking Platform">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            HCD JanusGraph Banking Platform
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Data Flow
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/davidleconte/hcd-janusgraph" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    davidleconte/hcd-janusgraph
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../getting-started/quickstart/">
          
  
  
  Getting Started

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../overview/">
          
  
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../banking/overview/">
          
  
  
  Banking Platform

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../api/rest-api/">
          
  
  
  API Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../operations/deployment/">
          
  
  
  Operations

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../security/overview/">
          
  
  
  Security

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../compliance/gdpr/">
          
  
  
  Compliance

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="HCD JanusGraph Banking Platform" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="HCD JanusGraph Banking Platform">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    HCD JanusGraph Banking Platform
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/davidleconte/hcd-janusgraph" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    davidleconte/hcd-janusgraph
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/quickstart/">
<span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/installation/">
<span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/configuration/">
<span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#tldr">
<span class="md-ellipsis">
      
        TL;DR
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#high-level-architecture">
<span class="md-ellipsis">
      
        High-Level Architecture
      
    </span>
</a>
<nav aria-label="High-Level Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ascii-diagram">
<span class="md-ellipsis">
      
        ASCII Diagram
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mermaid-flowchart">
<span class="md-ellipsis">
      
        Mermaid Flowchart
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#detailed-data-flow">
<span class="md-ellipsis">
      
        Detailed Data Flow
      
    </span>
</a>
<nav aria-label="Detailed Data Flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sequence-diagram">
<span class="md-ellipsis">
      
        Sequence Diagram
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#id-consistency-mapping">
<span class="md-ellipsis">
      
        ID Consistency Mapping
      
    </span>
</a>
<nav aria-label="ID Consistency Mapping" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-golden-rule">
<span class="md-ellipsis">
      
        The Golden Rule
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#id-flow-diagram">
<span class="md-ellipsis">
      
        ID Flow Diagram
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-example">
<span class="md-ellipsis">
      
        Code Example
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#topic-structure">
<span class="md-ellipsis">
      
        Topic Structure
      
    </span>
</a>
<nav aria-label="Topic Structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pulsar-topics">
<span class="md-ellipsis">
      
        Pulsar Topics
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#topic-flow-diagram">
<span class="md-ellipsis">
      
        Topic Flow Diagram
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling-dlq">
<span class="md-ellipsis">
      
        Error Handling &amp; DLQ
      
    </span>
</a>
<nav aria-label="Error Handling &amp; DLQ" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dead-letter-queue-flow">
<span class="md-ellipsis">
      
        Dead Letter Queue Flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dlq-topics">
<span class="md-ellipsis">
      
        DLQ Topics
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#consistency-guarantees">
<span class="md-ellipsis">
      
        Consistency Guarantees
      
    </span>
</a>
<nav aria-label="Consistency Guarantees" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#acid-properties">
<span class="md-ellipsis">
      
        ACID Properties
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#consistency-flow">
<span class="md-ellipsis">
      
        Consistency Flow
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-characteristics">
<span class="md-ellipsis">
      
        Performance Characteristics
      
    </span>
</a>
<nav aria-label="Performance Characteristics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#latency-breakdown">
<span class="md-ellipsis">
      
        Latency Breakdown
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#throughput">
<span class="md-ellipsis">
      
        Throughput
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#related-documentation">
<span class="md-ellipsis">
      
        Related Documentation
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../streaming-architecture/">
<span class="md-ellipsis">
    
  
    Streaming
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../system-architecture/">
<span class="md-ellipsis">
    
  
    System Design
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Banking Platform
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Banking Platform
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../banking/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banking/user-guide/">
<span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banking/aml-detection/">
<span class="md-ellipsis">
    
  
    AML Detection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banking/fraud-detection/">
<span class="md-ellipsis">
    
  
    Fraud Detection
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banking/compliance/">
<span class="md-ellipsis">
    
  
    Compliance
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/rest-api/">
<span class="md-ellipsis">
    
  
    REST API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/python-client/">
<span class="md-ellipsis">
    
  
    Python Client
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/gremlin-queries/">
<span class="md-ellipsis">
    
  
    Gremlin Queries
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Operations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/deployment/">
<span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/monitoring/">
<span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/runbook/">
<span class="md-ellipsis">
    
  
    Runbook
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Security
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/ssl-tls/">
<span class="md-ellipsis">
    
  
    SSL/TLS
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/vault/">
<span class="md-ellipsis">
    
  
    Vault Integration
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Compliance
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            
  
    Compliance
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../compliance/gdpr/">
<span class="md-ellipsis">
    
  
    GDPR
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../compliance/soc2/">
<span class="md-ellipsis">
    
  
    SOC2
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../compliance/audit-logging/">
<span class="md-ellipsis">
    
  
    Audit Logging
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#tldr">
<span class="md-ellipsis">
      
        TL;DR
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#high-level-architecture">
<span class="md-ellipsis">
      
        High-Level Architecture
      
    </span>
</a>
<nav aria-label="High-Level Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ascii-diagram">
<span class="md-ellipsis">
      
        ASCII Diagram
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mermaid-flowchart">
<span class="md-ellipsis">
      
        Mermaid Flowchart
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#detailed-data-flow">
<span class="md-ellipsis">
      
        Detailed Data Flow
      
    </span>
</a>
<nav aria-label="Detailed Data Flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sequence-diagram">
<span class="md-ellipsis">
      
        Sequence Diagram
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#id-consistency-mapping">
<span class="md-ellipsis">
      
        ID Consistency Mapping
      
    </span>
</a>
<nav aria-label="ID Consistency Mapping" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-golden-rule">
<span class="md-ellipsis">
      
        The Golden Rule
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#id-flow-diagram">
<span class="md-ellipsis">
      
        ID Flow Diagram
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-example">
<span class="md-ellipsis">
      
        Code Example
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#topic-structure">
<span class="md-ellipsis">
      
        Topic Structure
      
    </span>
</a>
<nav aria-label="Topic Structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pulsar-topics">
<span class="md-ellipsis">
      
        Pulsar Topics
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#topic-flow-diagram">
<span class="md-ellipsis">
      
        Topic Flow Diagram
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling-dlq">
<span class="md-ellipsis">
      
        Error Handling &amp; DLQ
      
    </span>
</a>
<nav aria-label="Error Handling &amp; DLQ" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dead-letter-queue-flow">
<span class="md-ellipsis">
      
        Dead Letter Queue Flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dlq-topics">
<span class="md-ellipsis">
      
        DLQ Topics
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#consistency-guarantees">
<span class="md-ellipsis">
      
        Consistency Guarantees
      
    </span>
</a>
<nav aria-label="Consistency Guarantees" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#acid-properties">
<span class="md-ellipsis">
      
        ACID Properties
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#consistency-flow">
<span class="md-ellipsis">
      
        Consistency Flow
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-characteristics">
<span class="md-ellipsis">
      
        Performance Characteristics
      
    </span>
</a>
<nav aria-label="Performance Characteristics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#latency-breakdown">
<span class="md-ellipsis">
      
        Latency Breakdown
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#throughput">
<span class="md-ellipsis">
      
        Throughput
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#related-documentation">
<span class="md-ellipsis">
      
        Related Documentation
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="unified-data-flow-documentation">Unified Data Flow Documentation<a class="headerlink" href="#unified-data-flow-documentation" title="Permanent link">¶</a></h1>
<p><strong>Created</strong>: 2026-02-06<br/>
<strong>Version</strong>: 1.0<br/>
<strong>Status</strong>: Active</p>
<hr/>
<h2 id="tldr">TL;DR<a class="headerlink" href="#tldr" title="Permanent link">¶</a></h2>
<p>Complete data flow from synthetic generation to queryable graph and vector search:</p>
<ol>
<li><strong>Data Generators</strong> → Create synthetic banking entities (persons, accounts, transactions)</li>
<li><strong>Apache Pulsar</strong> → Event streaming with guaranteed ordering and deduplication</li>
<li><strong>JanusGraph + HCD</strong> → Graph storage with ACID properties</li>
<li><strong>OpenSearch</strong> → Vector embeddings for semantic search</li>
</ol>
<p><strong>Key Guarantee</strong>: 1:1 ID mapping across all systems (Pulsar partition key = JanusGraph entity_id = OpenSearch _id)</p>
<hr/>
<h2 id="high-level-architecture">High-Level Architecture<a class="headerlink" href="#high-level-architecture" title="Permanent link">¶</a></h2>
<h3 id="ascii-diagram">ASCII Diagram<a class="headerlink" href="#ascii-diagram" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>┌─────────────────────────────────────────────────────────────────────────────┐
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>│                           DATA GENERATION LAYER                              │
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>├─────────────────────────────────────────────────────────────────────────────┤
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>│  │   Person    │  │   Company   │  │   Account   │  │ Transaction │        │
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>│  │  Generator  │  │  Generator  │  │  Generator  │  │  Generator  │        │
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘        │
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>│         │                │                │                │                │
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>│         └────────────────┴────────────────┴────────────────┘                │
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>│                                   │                                          │
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>│                          ┌────────▼────────┐                                 │
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>│                          │ StreamingOrchestrator │                           │
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>│                          │   (EntityProducer)    │                           │
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>│                          └────────┬────────┘                                 │
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>└───────────────────────────────────┼─────────────────────────────────────────┘
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a>                                    │
<a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a>┌───────────────────────────────────▼─────────────────────────────────────────┐
<a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a>│                           STREAMING LAYER (Pulsar)                          │
<a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a>├─────────────────────────────────────────────────────────────────────────────┤
<a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a>│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
<a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a>│  │  persons-   │  │  accounts-  │  │transactions-│  │  companies- │        │
<a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a>│  │   events    │  │   events    │  │   events    │  │   events    │        │
<a href="#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a>│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘        │
<a href="#__codelineno-0-24" id="__codelineno-0-24" name="__codelineno-0-24"></a>│         │                │                │                │                │
<a href="#__codelineno-0-25" id="__codelineno-0-25" name="__codelineno-0-25"></a>│         └────────────────┴────────────────┴────────────────┘                │
<a href="#__codelineno-0-26" id="__codelineno-0-26" name="__codelineno-0-26"></a>│                                   │                                          │
<a href="#__codelineno-0-27" id="__codelineno-0-27" name="__codelineno-0-27"></a>│                          Key_Shared Subscription                             │
<a href="#__codelineno-0-28" id="__codelineno-0-28" name="__codelineno-0-28"></a>└───────────────────────────────────┼─────────────────────────────────────────┘
<a href="#__codelineno-0-29" id="__codelineno-0-29" name="__codelineno-0-29"></a>                                    │
<a href="#__codelineno-0-30" id="__codelineno-0-30" name="__codelineno-0-30"></a>                    ┌───────────────┴───────────────┐
<a href="#__codelineno-0-31" id="__codelineno-0-31" name="__codelineno-0-31"></a>                    │                               │
<a href="#__codelineno-0-32" id="__codelineno-0-32" name="__codelineno-0-32"></a>┌───────────────────▼───────────────┐   ┌──────────▼──────────────────────────┐
<a href="#__codelineno-0-33" id="__codelineno-0-33" name="__codelineno-0-33"></a>│         GRAPH STORAGE             │   │         VECTOR STORAGE               │
<a href="#__codelineno-0-34" id="__codelineno-0-34" name="__codelineno-0-34"></a>├───────────────────────────────────┤   ├─────────────────────────────────────┤
<a href="#__codelineno-0-35" id="__codelineno-0-35" name="__codelineno-0-35"></a>│  ┌─────────────────────────────┐  │   │  ┌─────────────────────────────┐    │
<a href="#__codelineno-0-36" id="__codelineno-0-36" name="__codelineno-0-36"></a>│  │      GraphConsumer          │  │   │  │     VectorConsumer          │    │
<a href="#__codelineno-0-37" id="__codelineno-0-37" name="__codelineno-0-37"></a>│  │   (Gremlin Transactions)    │  │   │  │   (Embedding Generation)    │    │
<a href="#__codelineno-0-38" id="__codelineno-0-38" name="__codelineno-0-38"></a>│  └──────────────┬──────────────┘  │   │  └──────────────┬──────────────┘    │
<a href="#__codelineno-0-39" id="__codelineno-0-39" name="__codelineno-0-39"></a>│                 │                 │   │                 │                    │
<a href="#__codelineno-0-40" id="__codelineno-0-40" name="__codelineno-0-40"></a>│  ┌──────────────▼──────────────┐  │   │  ┌──────────────▼──────────────┐    │
<a href="#__codelineno-0-41" id="__codelineno-0-41" name="__codelineno-0-41"></a>│  │        JanusGraph           │  │   │  │        OpenSearch           │    │
<a href="#__codelineno-0-42" id="__codelineno-0-42" name="__codelineno-0-42"></a>│  │  (Vertices, Edges, Props)   │  │   │  │  (Vectors, Metadata)        │    │
<a href="#__codelineno-0-43" id="__codelineno-0-43" name="__codelineno-0-43"></a>│  └──────────────┬──────────────┘  │   │  └─────────────────────────────┘    │
<a href="#__codelineno-0-44" id="__codelineno-0-44" name="__codelineno-0-44"></a>│                 │                 │   │                                      │
<a href="#__codelineno-0-45" id="__codelineno-0-45" name="__codelineno-0-45"></a>│  ┌──────────────▼──────────────┐  │   │                                      │
<a href="#__codelineno-0-46" id="__codelineno-0-46" name="__codelineno-0-46"></a>│  │      HCD (Cassandra)        │  │   │                                      │
<a href="#__codelineno-0-47" id="__codelineno-0-47" name="__codelineno-0-47"></a>│  │   (WAL, 3x Replication)     │  │   │                                      │
<a href="#__codelineno-0-48" id="__codelineno-0-48" name="__codelineno-0-48"></a>│  └─────────────────────────────┘  │   │                                      │
<a href="#__codelineno-0-49" id="__codelineno-0-49" name="__codelineno-0-49"></a>└───────────────────────────────────┘   └──────────────────────────────────────┘
</code></pre></div>
<h3 id="mermaid-flowchart">Mermaid Flowchart<a class="headerlink" href="#mermaid-flowchart" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>flowchart TB
    subgraph Generation["Data Generation Layer"]
        PG[Person Generator]
        CG[Company Generator]
        AG[Account Generator]
        TG[Transaction Generator]
        SO[StreamingOrchestrator]

        PG --&gt; SO
        CG --&gt; SO
        AG --&gt; SO
        TG --&gt; SO
    end

    subgraph Pulsar["Apache Pulsar"]
        PT1[persons-events]
        PT2[accounts-events]
        PT3[transactions-events]
        PT4[companies-events]

        SO --&gt; PT1
        SO --&gt; PT2
        SO --&gt; PT3
        SO --&gt; PT4
    end

    subgraph GraphPath["Graph Storage Path"]
        GC[GraphConsumer]
        JG[(JanusGraph)]
        HCD[(HCD/Cassandra)]

        PT1 &amp; PT2 &amp; PT3 &amp; PT4 --&gt; GC
        GC --&gt; JG
        JG --&gt; HCD
    end

    subgraph VectorPath["Vector Storage Path"]
        VC[VectorConsumer]
        EMB[Embedding Model]
        OS[(OpenSearch)]

        PT1 &amp; PT2 &amp; PT3 &amp; PT4 --&gt; VC
        VC --&gt; EMB
        EMB --&gt; OS
    end

    style Pulsar fill:#f9f,stroke:#333
    style GraphPath fill:#bbf,stroke:#333
    style VectorPath fill:#bfb,stroke:#333</code></pre>
<hr/>
<h2 id="detailed-data-flow">Detailed Data Flow<a class="headerlink" href="#detailed-data-flow" title="Permanent link">¶</a></h2>
<h3 id="sequence-diagram">Sequence Diagram<a class="headerlink" href="#sequence-diagram" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant Gen as Data Generator
    participant Orch as StreamingOrchestrator
    participant Prod as EntityProducer
    participant Pulsar as Apache Pulsar
    participant GC as GraphConsumer
    participant JG as JanusGraph
    participant HCD as HCD Storage
    participant VC as VectorConsumer
    participant EMB as Embedding Model
    participant OS as OpenSearch

    Gen-&gt;&gt;Orch: Generate Entity
    Orch-&gt;&gt;Prod: Create EntityEvent
    Note over Prod: entity_id = partition_key
    Prod-&gt;&gt;Pulsar: Publish (topic, partition_key)
    Pulsar--&gt;&gt;Prod: ACK

    par Graph Path
        Pulsar-&gt;&gt;GC: Deliver Message
        GC-&gt;&gt;JG: Gremlin addV/addE
        JG-&gt;&gt;HCD: Write WAL + Data
        HCD--&gt;&gt;JG: Commit ACK
        JG--&gt;&gt;GC: Transaction Complete
        GC-&gt;&gt;Pulsar: Consumer ACK
    and Vector Path
        Pulsar-&gt;&gt;VC: Deliver Message
        VC-&gt;&gt;EMB: Generate Embedding
        EMB--&gt;&gt;VC: Vector (768 dims)
        VC-&gt;&gt;OS: Index Document (_id=entity_id)
        OS--&gt;&gt;VC: Index ACK
        VC-&gt;&gt;Pulsar: Consumer ACK
    end</code></pre>
<hr/>
<h2 id="id-consistency-mapping">ID Consistency Mapping<a class="headerlink" href="#id-consistency-mapping" title="Permanent link">¶</a></h2>
<h3 id="the-golden-rule">The Golden Rule<a class="headerlink" href="#the-golden-rule" title="Permanent link">¶</a></h3>
<p><strong>Every entity maintains the same ID across all systems:</strong></p>
<table>
<thead>
<tr>
<th>System</th>
<th>ID Field</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pulsar</td>
<td><code>partition_key</code></td>
<td><code>person-a1b2c3d4</code></td>
</tr>
<tr>
<td>JanusGraph</td>
<td><code>entity_id</code> property</td>
<td><code>person-a1b2c3d4</code></td>
</tr>
<tr>
<td>OpenSearch</td>
<td><code>_id</code> field</td>
<td><code>person-a1b2c3d4</code></td>
</tr>
</tbody>
</table>
<h3 id="id-flow-diagram">ID Flow Diagram<a class="headerlink" href="#id-flow-diagram" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>flowchart LR
    subgraph Generator
        ID1[entity_id: person-a1b2c3d4]
    end

    subgraph Pulsar
        ID2[partition_key: person-a1b2c3d4]
    end

    subgraph JanusGraph
        ID3["V().has('entity_id', 'person-a1b2c3d4')"]
    end

    subgraph OpenSearch
        ID4["_id: person-a1b2c3d4"]
    end

    ID1 --&gt; ID2
    ID2 --&gt; ID3
    ID2 --&gt; ID4

    style ID1 fill:#ffd,stroke:#333
    style ID2 fill:#f9f,stroke:#333
    style ID3 fill:#bbf,stroke:#333
    style ID4 fill:#bfb,stroke:#333</code></pre>
<h3 id="code-example">Code Example<a class="headerlink" href="#code-example" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1"># Entity creation with consistent ID</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">banking.streaming</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_person_event</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="c1"># ID generated once, used everywhere</span>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="n">entity_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"person-</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="n">event</span> <span class="o">=</span> <span class="n">create_person_event</span><span class="p">(</span>
<a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>    <span class="n">person_id</span><span class="o">=</span><span class="n">entity_id</span><span class="p">,</span>  <span class="c1"># Used as partition_key in Pulsar</span>
<a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"John Smith"</span><span class="p">,</span>
<a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
<a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>        <span class="s2">"entity_id"</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">,</span>  <span class="c1"># Stored in JanusGraph</span>
<a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a>        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"John Smith"</span><span class="p">,</span>
<a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a>        <span class="c1"># ... other fields</span>
<a href="#__codelineno-1-14" id="__codelineno-1-14" name="__codelineno-1-14"></a>    <span class="p">}</span>
<a href="#__codelineno-1-15" id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="p">)</span>
<a href="#__codelineno-1-16" id="__codelineno-1-16" name="__codelineno-1-16"></a>
<a href="#__codelineno-1-17" id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="c1"># In GraphConsumer:</span>
<a href="#__codelineno-1-18" id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="c1"># g.addV('person').property('entity_id', entity_id)</span>
<a href="#__codelineno-1-19" id="__codelineno-1-19" name="__codelineno-1-19"></a>
<a href="#__codelineno-1-20" id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="c1"># In VectorConsumer:</span>
<a href="#__codelineno-1-21" id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="c1"># opensearch.index(index='persons', id=entity_id, body={...})</span>
</code></pre></div>
<hr/>
<h2 id="topic-structure">Topic Structure<a class="headerlink" href="#topic-structure" title="Permanent link">¶</a></h2>
<h3 id="pulsar-topics">Pulsar Topics<a class="headerlink" href="#pulsar-topics" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Topic</th>
<th>Entity Type</th>
<th>Partition Key</th>
<th>Consumer Groups</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>persons-events</code></td>
<td>Person</td>
<td><code>person_id</code></td>
<td>graph-loaders, vector-loaders</td>
</tr>
<tr>
<td><code>accounts-events</code></td>
<td>Account</td>
<td><code>account_id</code></td>
<td>graph-loaders, vector-loaders</td>
</tr>
<tr>
<td><code>transactions-events</code></td>
<td>Transaction</td>
<td><code>from_account_id</code></td>
<td>graph-loaders, vector-loaders</td>
</tr>
<tr>
<td><code>companies-events</code></td>
<td>Company</td>
<td><code>company_id</code></td>
<td>graph-loaders, vector-loaders</td>
</tr>
<tr>
<td><code>communications-events</code></td>
<td>Communication</td>
<td><code>from_person_id</code></td>
<td>graph-loaders, vector-loaders</td>
</tr>
<tr>
<td><code>trades-events</code></td>
<td>Trade</td>
<td><code>account_id</code></td>
<td>graph-loaders, vector-loaders</td>
</tr>
</tbody>
</table>
<h3 id="topic-flow-diagram">Topic Flow Diagram<a class="headerlink" href="#topic-flow-diagram" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>flowchart TB
    subgraph Topics["Pulsar Topics"]
        P[persons-events]
        A[accounts-events]
        T[transactions-events]
        C[companies-events]
        COM[communications-events]
        TR[trades-events]
    end

    subgraph GraphLoaders["graph-loaders subscription"]
        GL1[GraphConsumer 1]
        GL2[GraphConsumer 2]
        GLN[GraphConsumer N]
    end

    subgraph VectorLoaders["vector-loaders subscription"]
        VL1[VectorConsumer 1]
        VL2[VectorConsumer 2]
        VLN[VectorConsumer N]
    end

    Topics --&gt; GraphLoaders
    Topics --&gt; VectorLoaders</code></pre>
<hr/>
<h2 id="error-handling-dlq">Error Handling &amp; DLQ<a class="headerlink" href="#error-handling-dlq" title="Permanent link">¶</a></h2>
<h3 id="dead-letter-queue-flow">Dead Letter Queue Flow<a class="headerlink" href="#dead-letter-queue-flow" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>flowchart TB
    subgraph Normal["Normal Flow"]
        P[Pulsar Topic]
        C[Consumer]
        S[(Storage)]

        P --&gt; C
        C --&gt; S
    end

    subgraph Error["Error Flow"]
        E[Processing Error]
        R{Retry Count}
        DLQ[Dead Letter Queue]
        Alert[Alert System]

        C --&gt; E
        E --&gt; R
        R --&gt;|&lt; 3 retries| C
        R --&gt;|&gt;= 3 retries| DLQ
        DLQ --&gt; Alert
    end

    style DLQ fill:#fbb,stroke:#333</code></pre>
<h3 id="dlq-topics">DLQ Topics<a class="headerlink" href="#dlq-topics" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Original Topic</th>
<th>DLQ Topic</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>persons-events</code></td>
<td><code>persons-events-dlq</code></td>
<td>Failed person processing</td>
</tr>
<tr>
<td><code>transactions-events</code></td>
<td><code>transactions-events-dlq</code></td>
<td>Failed transaction processing</td>
</tr>
<tr>
<td>(all topics)</td>
<td><code>*-events-dlq</code></td>
<td>Pattern for all entity types</td>
</tr>
</tbody>
</table>
<hr/>
<h2 id="consistency-guarantees">Consistency Guarantees<a class="headerlink" href="#consistency-guarantees" title="Permanent link">¶</a></h2>
<h3 id="acid-properties">ACID Properties<a class="headerlink" href="#acid-properties" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Mechanism</th>
<th>Guarantee</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Atomicity</strong></td>
<td>JanusGraph Txn + Pulsar ACK</td>
<td>All-or-nothing per batch</td>
</tr>
<tr>
<td><strong>Consistency</strong></td>
<td>Schema validation</td>
<td>Valid state transitions</td>
</tr>
<tr>
<td><strong>Isolation</strong></td>
<td>MVCC</td>
<td>Read Committed level</td>
</tr>
<tr>
<td><strong>Durability</strong></td>
<td>WAL + 3x replication</td>
<td>No data loss</td>
</tr>
</tbody>
</table>
<h3 id="consistency-flow">Consistency Flow<a class="headerlink" href="#consistency-flow" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; EventReceived
    EventReceived --&gt; Processing
    Processing --&gt; GraphWrite
    GraphWrite --&gt; WALWrite
    WALWrite --&gt; Replication
    Replication --&gt; ConsumerACK
    ConsumerACK --&gt; [*]

    Processing --&gt; DLQ: Error (3 retries)
    GraphWrite --&gt; NegativeACK: Txn Failed
    NegativeACK --&gt; EventReceived: Redelivery</code></pre>
<hr/>
<h2 id="performance-characteristics">Performance Characteristics<a class="headerlink" href="#performance-characteristics" title="Permanent link">¶</a></h2>
<h3 id="latency-breakdown">Latency Breakdown<a class="headerlink" href="#latency-breakdown" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Stage</th>
<th>Latency</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Producer → Pulsar</td>
<td>5ms p99</td>
<td>With batching</td>
</tr>
<tr>
<td>Pulsar → Consumer</td>
<td>2ms p99</td>
<td>Key_Shared routing</td>
</tr>
<tr>
<td>Consumer batch</td>
<td>10ms</td>
<td>1000 msgs or timeout</td>
</tr>
<tr>
<td>Graph write</td>
<td>100ms</td>
<td>Atomic transaction</td>
</tr>
<tr>
<td>Vector indexing</td>
<td>50ms</td>
<td>Embedding + index</td>
</tr>
<tr>
<td><strong>Total (Graph)</strong></td>
<td>~115ms</td>
<td>Event to queryable</td>
</tr>
<tr>
<td><strong>Total (Vector)</strong></td>
<td>~65ms</td>
<td>Event to searchable</td>
</tr>
</tbody>
</table>
<h3 id="throughput">Throughput<a class="headerlink" href="#throughput" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Throughput</th>
<th>Scale Factor</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pulsar</td>
<td>3M msg/sec</td>
<td>Per topic</td>
</tr>
<tr>
<td>Graph Loader</td>
<td>1K vertices/sec</td>
<td>Per worker</td>
</tr>
<tr>
<td>Vector Loader</td>
<td>2K docs/sec</td>
<td>Per worker</td>
</tr>
<tr>
<td><strong>System</strong></td>
<td>100K writes/sec</td>
<td>With 100 workers</td>
</tr>
</tbody>
</table>
<hr/>
<h2 id="related-documentation">Related Documentation<a class="headerlink" href="#related-documentation" title="Permanent link">¶</a></h2>
<ul>
<li><a href="../streaming-architecture/">Streaming Architecture</a> - Detailed streaming design</li>
<li><a href="../system-architecture/">System Architecture</a> - Overall system design</li>
<li><a href="../../banking/streaming/README.md">banking/streaming/README.md</a> - Implementation guide</li>
</ul>
<hr/>
<p><strong>Document Status</strong>: Active<br/>
<strong>Last Updated</strong>: 2026-02-06<br/>
<strong>Version</strong>: 1.0</p>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2026 David Leconte, IBM Worldwide | Tiger-Team
    </div>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/davidleconte/hcd-janusgraph" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
</body>
</html>